# DC-MAXs on Docker

## 目次

1. [概要](#概要)
1. [Docker導入のメリット](#docker導入のメリット)
1. [はじめる前に](#はじめる前に)
1. [コンテナサービス一覧](#コンテナサービス一覧)
1. [使い方](#使い方)
    1. [事前準備](#事前準備)
    1. [コンテナ操作](#コンテナ操作)
        1. [コンテナ起動](#コンテナ起動)
        1. [コンテナ停止](#コンテナ停止)
        1. [コンテナ削除](#コンテナ削除)
        1. [コンテナ内でコマンドを実行する](#コンテナ内でコマンドを実行する)
1. [Q&A](#qa)

## 概要

このリポジトリは、コンテナアプリケーション開発プラットフォームであるDockerを利用して、DC-MAXsをローカルで動作させるためのLAPP環境を作成するためのものである。

## Docker導入のメリット

[Docker導入のすすめ](./doc/Docker導入のすすめ.md) を参照。

## はじめる前に

使用するためにはDockerエンジンのインストールが必要であるため、まずはDocker Desktop for Windowsをインストールすること。

具体的なインストール方法についてはわかりやすい記事や公式のドキュメントがあるため割愛する。

[Docker Desktop for Windows インストール - Zenn](https://zenn.dev/seiya0/articles/tech-docker-desktop-for-win-install)

## コンテナサービス一覧

[コンテナサービス一覧](./doc/コンテナサービス一覧.md) を参照。

## 使い方

### 事前準備

1. 本リポジトリのルートディレクトリにある`.env.example-windows`または`.env.example-wsl`をコピーし、`.env`にリネームする。
1. `.env`の内容を環境に合わせて変更する。
    1. ファイル内の変数の意味については [.envファイルの環境変数について](./doc/envファイルの環境変数について.md) にて解説している。

### コンテナ操作

各サービスが入ったコンテナまとめて操作する。

#### コンテナ起動

1. 本リポジトリのルートディレクトリ（docker-compose.ymlと同階層）でコマンドプロンプトあるいはPowerShellを開く
1. 下記のコマンドを入力し実行する（コンテナイメージのプル・ビルドおよび起動が行われる）

```bash
docker compose up -d
```
※初回のみビルドが行われるため時間がかかる

#### コンテナ停止

```bash
docker compose stop
```

#### コンテナ削除

```bash
docker compose down
```

#### コンテナ内でコマンドを実行する

phpコマンド等を実行するためにコンテナ内に入る場合は以下のコマンドで入ることができる。

```bash
docker compose exec [サービス名] bash

# 例: appコンテナに入る
docker compose exec app bash
```

もしくは、1行で終わるコマンドを実行したいだけ場合はコンテナ内に入らなくても、以下のコマンドでも標準出力を受け取ることができる。

```bash
docker compose exec [サービス名] [コマンド]

# 例: appコンテナのホームディレクトリのファイル一覧を表示する
docker compose exec app ls /home -lah
```

## Q&A

[Q&A](./doc/Q&A.md) を参照。
